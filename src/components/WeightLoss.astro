---
// WeightLossSection.astro
const treatments = [
    {
        name: "Semaglutide Standard Treatment",
        image: "/images/semaglutide-standard.png",
        price: "$140/month",
        link: "#",
    },
    {
        name: "Tirzepatide Premium Treatment",
        image: "/images/tirzepatide-premium.png",
        price: "$200/month",
        link: "#",
    },
    {
        name: "Semaglutide Tablets Oral Treatment",
        image: "/images/semaglutide-tablets.png",
        price: "$125/month",
        competitor: "$1,000+/month",
        link: "#",
    },
];

const features = [
    "Doctor-Trusted Ingredients",
    "U.S. Based Pharmacies",
    "Licensed Providers",
    "FSA/HSA Eligible",
];

const testimonials = [
    { name: "Daryl", pounds: "72 POUNDS", image: "/images/slide2.jpg" },
    { name: "Sarah", pounds: "58 POUNDS", image: "/images/slide1.jpg" },
    { name: "Mary", pounds: "65 POUNDS", image: "/images/slide3.jpg" },
];

import BmiCalc from "./BmiCalc.astro";
import WeightModal from "./WeightModal.astro";
---

<section class="weight-loss-section">
    <div class="weight-loss-container">
        <!-- Main Content Card -->
        <div class="main-card">
            <div class="main-header">
                <h2>Lose weight with a plan made just for you.</h2>
            </div>

            <div class="main-content">
                <!-- Weight Loss Stats Card -->
                <div class="stats-card">
                    <h3 class="stats-heading">Lose up to</h3>
                    <div class="stats-number">
                        <span class="big-number">20</span>
                        <div class="stats-side">
                            <span class="percent">%</span>
                            <span class="bodyweight">bodyweight</span>
                            <svg
                                class="arrow-down"
                                width="60"
                                height="60"
                                viewBox="0 0 60 60"
                                fill="none"
                            >
                                <path
                                    d="M30 10 L30 40 M30 40 L20 30 M30 40 L40 30"
                                    stroke="currentColor"
                                    stroke-width="4"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"></path>
                            </svg>
                        </div>
                    </div>
                    <p class="stats-description">
                        People lost an average of <strong>15%</strong> (up to 20%)
                        bodyweight in a 68-week clinical study of 5 Minute Meds
                    </p>
                    <a href="#" class="get-started-btn-gradient">
                        Get Started
                        <svg
                            width="20"
                            height="20"
                            viewBox="0 0 20 20"
                            fill="none"
                        >
                            <path
                                d="M7 4l6 6-6 6"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"></path>
                        </svg>
                    </a>
                    <p class="disclaimer">
                        *In a 68- and 72-week clinical trial studying 5 Minute
                        Meds (2.4 mg) and Zepbound (15 mg) in patients without
                        diabetes and with BMI ≥30, or BMI ≥27 with a
                        weight-related condition, the average weight loss was
                        15% and 20%, when paired with diet and exercise changes
                        (compared to 2.4% and 3.1%, respectively, with diet and
                        exercise alone).
                    </p>
                </div>

                <!-- Woman Image Card -->
                <div class="woman-image-card">
                    <img
                        src="/images/woman.png"
                        alt="Happy Woman"
                        class="woman-image"
                    />
                </div>
            </div>
        </div>
        <BmiCalc />
        <WeightModal />
        <!-- Top Row -->
        <div class="top-row">
            <!-- Trust Badge Card -->
            <div class="trust-card">
                <div class="trust-content">
                    <ul class="trust-list">
                        {
                            features.map((feature) => (
                                <li>
                                    <svg
                                        width="24"
                                        height="24"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                    >
                                        <path
                                            d="M12 2L4 6v6c0 5.5 3.84 10.74 8 12 4.16-1.26 8-6.5 8-12V6l-8-4z"
                                            stroke="currentColor"
                                            stroke-width="2"
                                            fill="none"
                                        />
                                        <path
                                            d="M9 12l2 2 4-4"
                                            stroke="currentColor"
                                            stroke-width="2"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                        />
                                    </svg>
                                    <span>{feature}</span>
                                </li>
                            ))
                        }
                    </ul>
                </div>
                <div class="doctor-image">
                    <img src="/images/doctor.png" alt="Doctor" />
                </div>
            </div>

            <!-- Testimonial Slideshow -->
            <div class="testimonial-slideshow-weight">
                {
                    testimonials.map((testimonial, index) => (
                        <div
                            class={`slide-weight ${index === 0 ? "active" : ""}`}
                        >
                            <img
                                src={testimonial.image}
                                alt={testimonial.name}
                                class="testimonial-image-weight"
                            />
                            <div class="testimonial-info-weight">
                                <p class="testimonial-name-weight">
                                    {testimonial.name}
                                </p>
                                <p class="testimonial-weight-weight">
                                    Lost {testimonial.pounds}
                                </p>
                            </div>
                        </div>
                    ))
                }
            </div>
        </div>

        <!-- Treatment Options -->
        <div class="treatments-grid">
            {
                treatments.map((treatment) => (
                    <div class="treatment-card">
                        <h4>{treatment.name}</h4>
                        <div class="treatment-image">
                            <img src={treatment.image} alt={treatment.name} />
                        </div>
                        <p class="treatment-price">
                            Our Price: <strong>{treatment.price}</strong>
                        </p>
                        {treatment.competitor && (
                            <p class="competitor-price">
                                Our Competitors: {treatment.competitor}
                            </p>
                        )}
                        <a
                            href={treatment.link}
                            class="get-started-btn-gradient"
                        >
                            Get Started
                            <svg
                                width="20"
                                height="20"
                                viewBox="0 0 20 20"
                                fill="none"
                            >
                                <path
                                    d="M7 4l6 6-6 6"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                />
                            </svg>
                        </a>
                    </div>
                ))
            }
        </div>
    </div>
</section>

<script>
    // Testimonial slideshow
    let currentSlideWeight = 0;
    let isPausedWeight = false;
    let slideIntervalWeight;

    function showSlideWeight(index) {
        const slides = document.querySelectorAll(".slide-weight");
        slides.forEach((slide, i) => {
            if (i === index) {
                slide.classList.add("active");
            } else {
                slide.classList.remove("active");
            }
        });
    }

    function nextSlideWeight() {
        if (!isPausedWeight) {
            const slides = document.querySelectorAll(".slide-weight");
            currentSlideWeight = (currentSlideWeight + 1) % slides.length;
            showSlideWeight(currentSlideWeight);
        }
    }

    function startSlideshowWeight() {
        slideIntervalWeight = setInterval(nextSlideWeight, 5000);
    }

    function stopSlideshowWeight() {
        clearInterval(slideIntervalWeight);
    }

    const slideshowWeight = document.querySelector(
        ".testimonial-slideshow-weight",
    );

    if (slideshowWeight) {
        startSlideshowWeight();

        slideshowWeight.addEventListener("mouseenter", () => {
            isPausedWeight = true;
        });

        slideshowWeight.addEventListener("mouseleave", () => {
            isPausedWeight = false;
        });
    }
</script>

<style>
    .weight-loss-section {
        padding-left: 80px;
        padding-right: 80px;
        background-color: #f9f9fa;
        border-radius: 20px;
        border-top: 1px solid rgb(0, 112, 218);
    }

    .weight-loss-container {
        margin: 0 auto;
        padding: 16px;
        background-color: #f9f9fa;
    }

    /* Top Row */
    .top-row {
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: 16px;
        margin-bottom: 16px;
    }

    /* Trust Card */
    .trust-card {
        background-color: #ffffff;
        border-radius: 28px;
        padding: 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        color: #030303;
        position: relative;
        overflow: hidden;
        box-shadow: 2px 4px 12px #00000014;
    }

    .trust-content {
        flex: 1;
    }

    .trust-list {
        list-style: none;
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .trust-list li {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
        font-weight: 500;
    }

    .trust-list svg {
        width: 20px;
        height: 20px;
        stroke: #030303;
        flex-shrink: 0;
    }

    .doctor-image {
        position: relative;
        height: 160px;
        margin-bottom: -40px;
    }

    .doctor-image img {
        object-fit: contain;
        width: 200px;
    }

    /* Main Card */
    .main-card {
        border-radius: 40px;
        padding: 0 20px;
        margin-bottom: 16px;
    }

    .main-header {
        display: flex;
        justify-content: center;
        align-items: center;
        max-width: 700px;
        margin-bottom: 16px;
    }

    .main-header h2 {
        font-size: 36px;
        font-weight: 400;
        color: #030303;
        font-family: "Sofia";
    }

    /* Main Content - 2 column grid for stats and woman */
    .main-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
        margin-bottom: 16px;
        align-items: center;
    }

    /* Stats Card */
    .stats-card {
        border-radius: 40px;
        display: flex;
        flex-direction: column;
        gap: 16px;
        color: #2d2d2d;
    }

    .stats-heading {
        font-size: 20px;
        font-weight: 400;
        color: #2d2d2d;
        margin: 0;
        font-family: "Sofia";
    }

    .stats-number {
        display: flex;
        align-items: flex-start;
        gap: 10px;
    }

    .big-number {
        font-size: 120px;
        font-weight: 700;
        line-height: 0.85;
        background: linear-gradient(
            135deg,
            rgb(0, 92, 179) 0%,
            rgb(64, 156, 255) 100%
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .stats-side {
        display: flex;
        flex-direction: column;
        gap: 4px;
        padding-top: 12px;
    }

    .percent {
        font-size: 32px;
        font-weight: 700;
        color: rgb(0, 92, 179);
    }

    .bodyweight {
        font-size: 14px;
        font-weight: 500;
        color: rgb(0, 92, 179);
    }

    .arrow-down {
        width: 32px;
        height: 32px;
        stroke: #007e3e;
        margin-top: 4px;
    }

    .stats-description {
        font-size: 13px;
        line-height: 1.5;
        color: #2a2a2a;
        margin: 0;
        font-family: "Inter";
    }

    .stats-description strong {
        font-weight: 700;
    }

    .get-started-btn-dark {
        background-color: #ffffff;
        color: #1a1a1a;
        border: none;
        border-radius: 50px;
        padding: 10px 20px;
        font-size: 14px;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        align-self: flex-start;
        font-family: "Inter";
    }

    .get-started-btn-dark:hover {
        background-color: #f0f0f0;
        transform: translateY(-2px);
        box-shadow: 2px 4px 12px #00000014;
    }

    .get-started-btn-dark svg {
        stroke: #1a1a1a;
    }

    .disclaimer {
        font-size: 9px;
        line-height: 1.4;
        color: #2a2a2a;
        margin: 0;
        font-family: "Inter";
    }

    /* Woman Image Card */
    .woman-image-card {
        position: relative;
        overflow: visible;
        display: flex;
        align-items: flex-end;
        justify-content: center;
    }

    .woman-image {
        width: 100%;
        height: auto;
        object-fit: contain;
        object-position: bottom;
        max-height: 400px;
        margin-bottom: -16px;
    }

    /* Info Product Container */
    .info-product-container {
        background-color: rgba(50, 70, 80, 0.95);
        border-radius: 40px;
        padding: 20px;
        color: white;
        display: flex;
        flex-direction: column;
        gap: 16px;
        box-shadow: 2px 4px 12px #00000014;
    }

    .info-box h3 {
        font-size: 22px;
        margin-bottom: 10px;
        font-weight: 400;
        font-family: "Sofia";
    }

    .info-box p {
        font-size: 13px;
        line-height: 1.5;
        margin-bottom: 8px;
        color: rgba(255, 255, 255, 0.9);
        font-family: "Inter";
    }

    .quality-text {
        font-weight: 600;
        margin-top: 12px;
    }

    .product-hero {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .product-hero img {
        width: 60%;
        height: auto;
        filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.2));
    }

    /* Testimonial Slideshow */
    .testimonial-slideshow-weight {
        background: linear-gradient(135deg, #00295f 0%, #004080 100%);
        border-radius: 40px;
        position: relative;
        overflow: hidden;
        min-height: 280px;
        box-shadow: 2px 4px 12px #00000014;
    }

    .slide-weight {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
        display: flex;
        flex-direction: column;
    }

    .slide-weight.active {
        opacity: 1;
        z-index: 1;
    }

    .testimonial-image-weight {
        width: 100%;
        height: 70%;
        object-fit: cover;
    }

    .testimonial-info-weight {
        background: linear-gradient(135deg, #278fc3 0%, #00295f 100%);
        padding: 16px 20px;
        display: flex;
        flex-direction: column;
        gap: 6px;
        flex: 1;
    }

    .testimonial-name-weight {
        font-family: "Sofia";
        font-size: 22px;
        font-weight: 400;
        color: white;
        margin: 0;
    }

    .testimonial-weight-weight {
        font-size: 13px;
        font-weight: 600;
        color: white;
        margin: 0;
        font-family: "Inter";
    }

    /* Treatments Grid */
    .treatments-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 16px;
        margin-bottom: 16px;
        padding: 0;
    }

    .treatment-card {
        background-color: #ffffff;
        border-radius: 40px;
        padding: 20px;
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
        box-shadow: 2px 4px 12px #00000014;
    }

    .treatment-card h4 {
        font-size: 16px;
        font-weight: 400;
        color: #030303;
        margin-bottom: 16px;
        min-height: 38px;
        font-family: "Sofia";
    }

    .treatment-image {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 16px;
    }

    .treatment-image img {
        max-width: 100%;
        height: auto;
        max-height: 120px;
        object-fit: contain;
    }

    .treatment-price {
        font-size: 13px;
        color: #030303;
        margin: 0 0 16px 0;
        font-family: "Inter";
    }

    .treatment-price strong {
        font-weight: 700;
    }

    .competitor-price {
        font-size: 12px;
        color: #030303;
        margin-bottom: 16px;
        font-family: "Inter";
    }

    .get-started-btn {
        background: linear-gradient(
            135deg,
            #ff6b9d 0%,
            #ffa06b 50%,
            #ffd56b 100%
        );
        color: #030303;
        border: 1px solid #030303;
        border-radius: 50px;
        padding: 10px 20px;
        font-size: 13px;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.3s ease;
        display: inline-block;
        font-family: "Inter";
    }

    .get-started-btn:hover {
        background-color: #030303;
        color: white;
        transform: translateY(-2px);
        box-shadow: 2px 4px 12px #00000014;
    }

    .competitor-comparison {
        border-radius: 40px;
        padding: 12px;
        position: relative;
        min-height: 280px;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
    }

    .competitor-image {
        height: auto;
        max-width: 100%;
        object-fit: contain;
        border-radius: 40px;
        box-shadow: 2px 4px 12px #00000014;
    }

    @media (max-width: 768px) {
        .competitor-comparison {
            padding: 16px;
            min-height: 200px;
            border-radius: 28px;
        }
    }

    /* Responsive Design */
    @media (max-width: 1024px) {
        .treatments-grid {
            grid-template-columns: 1fr;
        }

        .main-content {
            grid-template-columns: 1fr;
        }

        .stats-card {
            order: -1;
        }

        .woman-image-card {
            max-height: 280px;
        }

        .woman-image {
            max-height: 280px;
        }
    }

    @media (max-width: 768px) {
        .weight-loss-section {
            padding-left: 20px;
            padding-right: 20px;
        }

        .weight-loss-container {
            padding: 12px;
        }

        .trust-card {
            flex-direction: column;
            text-align: center;
            border-radius: 24px;
            padding: 16px;
        }

        .trust-list {
            gap: 8px;
        }

        .trust-list li {
            font-size: 13px;
        }

        .doctor-image {
            height: 120px;
            margin-bottom: -40px;
        }

        .doctor-image img {
            width: 160px;
        }

        .main-card {
            padding: 0 12px;
            border-radius: 28px;
            margin-bottom: 12px;
        }

        .main-header {
            margin-bottom: 12px;
        }

        .main-header h2 {
            font-size: 24px;
        }

        .main-content {
            gap: 12px;
            margin-bottom: 12px;
        }

        .info-box h3 {
            font-size: 18px;
        }

        .big-number {
            font-size: 80px;
        }

        .percent {
            font-size: 24px;
        }

        .stats-heading {
            font-size: 17px;
        }

        .stats-card {
            gap: 12px;
        }

        .top-row {
            gap: 12px;
            margin-bottom: 12px;
        }

        .treatments-grid {
            padding: 0;
            gap: 12px;
            margin-bottom: 12px;
        }

        .treatment-card {
            border-radius: 28px;
            padding: 16px;
        }

        .treatment-card h4 {
            margin-bottom: 12px;
            font-size: 15px;
        }

        .treatment-image {
            margin-bottom: 12px;
        }

        .treatment-image img {
            max-height: 100px;
        }

        .treatment-price {
            margin-bottom: 12px;
        }

        .competitor-price {
            margin-bottom: 12px;
        }

        .competitor-comparison {
            padding: 20px 12px;
            min-height: 200px;
            border-radius: 28px;
        }

        .competitor-comparison p {
            font-size: 24px;
        }

        .testimonial-slideshow-weight {
            min-height: 240px;
            border-radius: 28px;
        }

        .testimonial-name-weight {
            font-size: 18px;
        }

        .testimonial-info-weight {
            padding: 12px 16px;
        }

        .product-hero img {
            width: 80%;
        }

        .stats-card {
            border-radius: 28px;
        }

        .info-product-container {
            border-radius: 28px;
            gap: 12px;
            padding: 16px;
        }

        .woman-image-card {
            max-height: 200px;
        }

        .woman-image {
            max-height: 200px;
            margin-bottom: -12px;
        }
    }

    .get-started-btn-gradient {
        position: relative;
        max-width: 165px;
        background-color: #ffffff;
        color: #1a1a1a;
        border: none;
        border-radius: 50px;
        padding: 10px 20px;
        font-size: 14px;
        font-weight: 600;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-family: "Inter", sans-serif;
        transition: all 0.3s ease;
        z-index: 1;
    }

    /* Gradient border using pseudo-element */
    .get-started-btn-gradient::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 50px;
        padding: 2.5px;
        background: linear-gradient(
            135deg,
            #fdd4a3,
            #fdd4a3 13%,
            #fba69e 32%,
            #fb6fec 49%,
            #84a9fa 68%,
            #90dcf7 86%,
            #c7e9ab
        );
        -webkit-mask:
            linear-gradient(#fff 0 0) content-box,
            linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        z-index: -1;
        transition: all 0.3s ease;
    }

    /* Hover effect - rotates the gradient */
    .get-started-btn-gradient:hover::before {
        background: linear-gradient(
            225deg,
            #fdd4a3,
            #fdd4a3 13%,
            #fba69e 32%,
            #fb6fec 49%,
            #84a9fa 68%,
            #90dcf7 86%,
            #c7e9ab
        );
        padding: 3px;
    }

    .get-started-btn-gradient:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(251, 111, 236, 0.3);
    }

    .get-started-btn-gradient svg {
        stroke: #1a1a1a;
        transition: transform 0.3s ease;
    }

    .get-started-btn-gradient:hover svg {
        transform: translateX(3px);
    }
</style>
