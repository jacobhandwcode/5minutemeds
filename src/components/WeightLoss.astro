---
// WeightLossSection.astro
const treatments = [
    {
        name: "Semaglutide Standard Treatment",
        image: "/images/semaglutide-standard.png",
        price: "$140/month",
        link: "#",
    },
    {
        name: "Tirzepatide Premium Treatment",
        image: "/images/tirzepatide-premium.png",
        price: "$200/month",
        link: "#",
    },
    {
        name: "Semaglutide Tablets Oral Treatment",
        image: "/images/semaglutide-tablets.png",
        price: "$125/month",
        competitor: "$1,000+/month",
        link: "#",
    },
];

const features = [
    "Doctor-Trusted Ingredients",
    "U.S. Based Pharmacies",
    "Licensed Providers",
    "FSA/HSA Eligible",
];

const testimonials = [
    { name: "Daryl", pounds: "72 POUNDS", image: "/images/slide2.jpg" },
    { name: "Sarah", pounds: "58 POUNDS", image: "/images/slide1.jpg" },
    { name: "Mary", pounds: "65 POUNDS", image: "/images/slide3.jpg" },
];

import BmiCalc from "./BmiCalc.astro";
import WeightModal from "./WeightModal.astro";
---

<section class="weight-loss-section">
    <!-- Main Content Card -->
    <div class="main-card">
        <div class="main-header">
            <h2>Lose weight with a plan made just for you.</h2>
        </div>

        <div class="main-content">
            <!-- Weight Loss Stats Card -->
            <div class="stats-card">
                <h3 class="stats-heading">Lose up to</h3>
                <div class="stats-number">
                    <span class="big-number">20</span>
                    <div class="stats-side">
                        <span class="percent">%</span>
                        <span class="bodyweight">bodyweight</span>
                        <svg
                            class="arrow-down"
                            width="60"
                            height="60"
                            viewBox="0 0 60 60"
                            fill="none"
                        >
                            <path
                                d="M30 10 L30 40 M30 40 L20 30 M30 40 L40 30"
                                stroke="currentColor"
                                stroke-width="4"
                                stroke-linecap="round"
                                stroke-linejoin="round"></path>
                        </svg>
                    </div>
                </div>
                <p class="stats-description">
                    People lost an average of <strong>15%</strong> (up to 20%) bodyweight
                    in a 68-week clinical study of 5 Minute Meds
                </p>
                <a href="#" class="get-started-btn-gradient">
                    Get Started
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path
                            d="M7 4l6 6-6 6"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"></path>
                    </svg>
                </a>
                <p class="disclaimer">
                    *In a 68- and 72-week clinical trial studying 5 Minute Meds
                    (2.4 mg) and Zepbound (15 mg) in patients without diabetes
                    and with BMI ≥30, or BMI ≥27 with a weight-related
                    condition, the average weight loss was 15% and 20%, when
                    paired with diet and exercise changes (compared to 2.4% and
                    3.1%, respectively, with diet and exercise alone).
                </p>
            </div>

            <!-- Woman Image Card -->
            <div class="woman-image-card">
                <img
                    src="/images/woman.png"
                    alt="Happy Woman"
                    class="woman-image"
                />
            </div>
        </div>
    </div>
    <BmiCalc />
    <WeightModal />
    <!-- Top Row -->
    <div class="top-row">
        <!-- Trust Badge Card -->
        <div class="trust-card">
            <div class="trust-content">
                <ul class="trust-list">
                    {
                        features.map((feature) => (
                            <li>
                                <svg
                                    width="24"
                                    height="24"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                >
                                    <path
                                        d="M12 2L4 6v6c0 5.5 3.84 10.74 8 12 4.16-1.26 8-6.5 8-12V6l-8-4z"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        fill="none"
                                    />
                                    <path
                                        d="M9 12l2 2 4-4"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />
                                </svg>
                                <span>{feature}</span>
                            </li>
                        ))
                    }
                </ul>
            </div>
            <div class="doctor-image">
                <img src="/images/doctor.png" alt="Doctor" />
            </div>
        </div>

        <!-- Testimonial Slideshow -->
        <div class="testimonial-slideshow-weight">
            {
                testimonials.map((testimonial, index) => (
                    <div class={`slide-weight ${index === 0 ? "active" : ""}`}>
                        <img
                            src={testimonial.image}
                            alt={testimonial.name}
                            class="testimonial-image-weight"
                        />
                        <div class="testimonial-info-weight">
                            <p class="testimonial-name-weight">
                                {testimonial.name}
                            </p>
                            <p class="testimonial-weight-weight">
                                Lost {testimonial.pounds}
                            </p>
                        </div>
                    </div>
                ))
            }
        </div>
    </div>

    <!-- Treatment Options -->
    <div class="treatments-grid">
        {
            treatments.map((treatment) => (
                <div class="treatment-card">
                    <h4>{treatment.name}</h4>
                    <div class="treatment-image">
                        <img src={treatment.image} alt={treatment.name} />
                    </div>
                    <p class="treatment-price">
                        Our Price: <strong>{treatment.price}</strong>
                    </p>
                    {treatment.competitor && (
                        <p class="competitor-price">
                            Our Competitors: {treatment.competitor}
                        </p>
                    )}
                    <a href={treatment.link} class="get-started-btn-gradient">
                        Get Started
                        <svg
                            width="20"
                            height="20"
                            viewBox="0 0 20 20"
                            fill="none"
                        >
                            <path
                                d="M7 4l6 6-6 6"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            />
                        </svg>
                    </a>
                </div>
            ))
        }
    </div>
</section>

<script>
    // Testimonial slideshow
    let currentSlideWeight = 0;
    let isPausedWeight = false;
    let slideIntervalWeight;

    function showSlideWeight(index) {
        const slides = document.querySelectorAll(".slide-weight");
        slides.forEach((slide, i) => {
            if (i === index) {
                slide.classList.add("active");
            } else {
                slide.classList.remove("active");
            }
        });
    }

    function nextSlideWeight() {
        if (!isPausedWeight) {
            const slides = document.querySelectorAll(".slide-weight");
            currentSlideWeight = (currentSlideWeight + 1) % slides.length;
            showSlideWeight(currentSlideWeight);
        }
    }

    function startSlideshowWeight() {
        slideIntervalWeight = setInterval(nextSlideWeight, 5000);
    }

    function stopSlideshowWeight() {
        clearInterval(slideIntervalWeight);
    }

    const slideshowWeight = document.querySelector(
        ".testimonial-slideshow-weight",
    );

    if (slideshowWeight) {
        startSlideshowWeight();

        slideshowWeight.addEventListener("mouseenter", () => {
            isPausedWeight = true;
        });

        slideshowWeight.addEventListener("mouseleave", () => {
            isPausedWeight = false;
        });
    }
</script>

<style>
    .weight-loss-section {
        margin: 0 auto;
        padding: 24px;
        background-color: #f9f9fa;
        border-radius: 20px;
        border-top: 1px solid rgb(0, 112, 218);
    }

    /* Top Row */
    .top-row {
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: 16px;
        margin-bottom: 16px;
    }

    /* Trust Card */
    .trust-card {
        border-radius: 32px;
        padding: 28px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        color: #030303;
        position: relative;
        overflow: hidden;
        box-shadow: 2px 4px 12px #00000045;
    }

    .trust-content {
        flex: 1;
    }

    .trust-list {
        list-style: none;
        display: flex;
        flex-direction: column;
        gap: 14px;
    }

    .trust-list li {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 15px;
        font-weight: 500;
    }

    .trust-list svg {
        width: 24px;
        height: 24px;
        stroke: white;
        flex-shrink: 0;
    }

    .doctor-image {
        position: relative;
        height: 200px;
        margin-bottom: -40px;
    }

    .doctor-image img {
        object-fit: contain;
        width: 240px;
    }

    /* Main Card */
    .main-card {
        border-radius: 48px;
        padding: 0 28px;
    }

    .main-header {
        display: flex;
        justify-content: center;
        align-items: center;
        max-width: 700px;
    }

    .main-header h2 {
        font-size: 42px;
        font-weight: 400;
        color: #030303;
        font-family: "Sofia";
    }

    /* Main Content - 2 column grid for stats and woman */
    .main-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
        margin-bottom: 16px;
        align-items: center;
        margin-bottom: -19px;
    }

    /* Stats Card */
    .stats-card {
        border-radius: 48px;
        display: flex;
        flex-direction: column;
        gap: 16px;
        color: #2d2d2d;
    }

    .stats-heading {
        font-size: 22px;
        font-weight: 400;
        color: #2d2d2d;
        margin: 0;
        font-family: "Sofia";
    }

    .stats-number {
        display: flex;
        align-items: flex-start;
        gap: 12px;
    }

    .big-number {
        font-size: 140px;
        font-weight: 700;
        line-height: 0.85;
        background: linear-gradient(
            135deg,
            rgb(0, 92, 179) 0%,
            rgb(64, 156, 255) 100%
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .stats-side {
        display: flex;
        flex-direction: column;
        gap: 6px;
        padding-top: 16px;
    }

    .percent {
        font-size: 38px;
        font-weight: 700;
        color: rgb(0, 92, 179);
    }

    .bodyweight {
        font-size: 15px;
        font-weight: 500;
        color: rgb(0, 92, 179);
    }

    .arrow-down {
        width: 40px;
        height: 40px;
        stroke: #007e3e;
        margin-top: 6px;
    }

    .stats-description {
        font-size: 14px;
        line-height: 1.5;
        color: #2a2a2a;
        margin: 0;
        font-family: "Inter";
    }

    .stats-description strong {
        font-weight: 700;
    }

    .get-started-btn-dark {
        background-color: #ffffff;
        color: #1a1a1a;
        border: none;
        border-radius: 50px;
        padding: 12px 24px;
        font-size: 15px;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        align-self: flex-start;
        font-family: "Inter";
    }

    .get-started-btn-dark:hover {
        background-color: #f0f0f0;
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }

    .get-started-btn-dark svg {
        stroke: #1a1a1a;
    }

    .disclaimer {
        font-size: 10px;
        line-height: 1.4;
        color: #2a2a2a;
        margin: 0;
        font-family: "Inter";
    }

    /* Woman Image Card */
    .woman-image-card {
        position: relative;
        overflow: visible;
        display: flex;
        align-items: flex-end;
        justify-content: center;
    }

    .woman-image {
        width: 100%;
        height: auto;
        object-fit: contain;
        object-position: bottom;
        max-height: 480px;
    }

    /* Info Product Container */
    .info-product-container {
        background-color: rgba(50, 70, 80, 0.95);
        border-radius: 48px;
        padding: 28px;
        color: white;
        display: flex;
        flex-direction: column;
        gap: 16px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    }

    .info-box h3 {
        font-size: 26px;
        margin-bottom: 12px;
        font-weight: 400;
        font-family: "Sofia";
    }

    .info-box p {
        font-size: 14px;
        line-height: 1.5;
        margin-bottom: 10px;
        color: rgba(255, 255, 255, 0.9);
        font-family: "Inter";
    }

    .quality-text {
        font-weight: 600;
        margin-top: 16px;
    }

    .product-hero {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .product-hero img {
        width: 60%;
        height: auto;
        filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.2));
    }

    /* Testimonial Slideshow */
    .testimonial-slideshow-weight {
        background: linear-gradient(135deg, #00295f 0%, #004080 100%);
        border-radius: 48px;
        position: relative;
        overflow: hidden;
        min-height: 320px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    }

    .slide-weight {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
        display: flex;
        flex-direction: column;
    }

    .slide-weight.active {
        opacity: 1;
        z-index: 1;
    }

    .testimonial-image-weight {
        width: 100%;
        height: 70%;
        object-fit: cover;
    }

    .testimonial-info-weight {
        background: linear-gradient(135deg, #278fc3 0%, #00295f 100%);
        padding: 22px 28px;
        display: flex;
        flex-direction: column;
        gap: 8px;
        flex: 1;
    }

    .testimonial-name-weight {
        font-family: "Sofia";
        font-size: 26px;
        font-weight: 400;
        color: white;
        margin: 0;
    }

    .testimonial-weight-weight {
        font-size: 14px;
        font-weight: 600;
        color: white;
        margin: 0;
        font-family: "Inter";
    }

    /* Treatments Grid */
    .treatments-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 16px;
        margin-bottom: 16px;
        padding: 0;
    }

    .treatment-card {
        border-radius: 48px;
        padding: 28px;
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .treatment-card h4 {
        font-size: 17px;
        font-weight: 400;
        color: #030303;
        margin-bottom: 0;
        min-height: 42px;
        font-family: "Sofia";
    }

    .treatment-image {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .treatment-image img {
        max-width: 100%;
        height: auto;
        max-height: 140px;
        object-fit: contain;
    }

    .treatment-price {
        font-size: 14px;
        color: #030303;
        margin: 6px 0;
        font-family: "Inter";
    }

    .treatment-price strong {
        font-weight: 700;
    }

    .competitor-price {
        font-size: 13px;
        color: #030303;
        margin-bottom: 6px;
        font-family: "Inter";
    }

    .get-started-btn {
        background: linear-gradient(
            135deg,
            #ff6b9d 0%,
            #ffa06b 50%,
            #ffd56b 100%
        );
        color: #030303;
        border: 1px solid #030303;
        border-radius: 50px;
        padding: 12px 24px;
        font-size: 14px;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.3s ease;
        display: inline-block;
        font-family: "Inter";
    }

    .get-started-btn:hover {
        background-color: #030303;
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(45, 90, 61, 0.3);
    }

    .competitor-comparison {
        border-radius: 48px;
        padding: 16px;
        position: relative;
        min-height: 320px;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
    }

    .competitor-image {
        height: auto;
        max-width: 100%;
        object-fit: contain;
        border-radius: 48px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    }

    @media (max-width: 768px) {
        .competitor-comparison {
            padding: 20px;
            min-height: 240px;
            border-radius: 32px;
        }
    }

    /* Responsive Design */
    @media (max-width: 1024px) {
        .treatments-grid {
            grid-template-columns: 1fr;
        }

        .main-content {
            grid-template-columns: 1fr;
        }

        .stats-card {
            order: -1;
        }

        .woman-image-card {
            max-height: 320px;
        }

        .woman-image {
            max-height: 320px;
        }
    }

    @media (max-width: 768px) {
        .weight-loss-section {
            padding: 18px;
        }

        .trust-card {
            flex-direction: column;
            text-align: center;
            border-radius: 32px;
        }

        .doctor-image {
            height: 160px;
        }

        .main-card {
            padding: 0 18px;
            border-radius: 32px;
        }

        .main-header h2 {
            font-size: 28px;
        }

        .info-box h3 {
            font-size: 20px;
        }

        .big-number {
            font-size: 96px;
        }

        .percent {
            font-size: 28px;
        }

        .stats-heading {
            font-size: 19px;
        }

        .treatments-grid {
            padding: 0;
        }

        .treatment-card {
            border-radius: 32px;
            padding: 24px;
        }

        .competitor-comparison {
            padding: 28px 18px;
            min-height: 240px;
            border-radius: 32px;
        }

        .competitor-comparison p {
            font-size: 28px;
        }

        .testimonial-slideshow-weight {
            min-height: 280px;
            border-radius: 32px;
        }

        .testimonial-name-weight {
            font-size: 20px;
        }

        .testimonial-info-weight {
            padding: 18px 24px;
        }

        .product-hero img {
            width: 80%;
        }

        .stats-card {
            border-radius: 32px;
        }

        .info-product-container {
            border-radius: 32px;
        }

        .woman-image-card {
            max-height: 240px;
        }

        .woman-image {
            max-height: 240px;
        }
    }

    .get-started-btn-gradient {
        position: relative;
        max-width: 165px;
        background-color: #ffffff;
        color: #1a1a1a;
        border: none;
        border-radius: 50px;
        padding: 12px 24px;
        font-size: 15px;
        font-weight: 600;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-family: "Inter", sans-serif;
        transition: all 0.3s ease;
        z-index: 1;
    }

    /* Gradient border using pseudo-element */
    .get-started-btn-gradient::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 50px;
        padding: 2.5px;
        background: linear-gradient(
            135deg,
            #fdd4a3,
            #fdd4a3 13%,
            #fba69e 32%,
            #fb6fec 49%,
            #84a9fa 68%,
            #90dcf7 86%,
            #c7e9ab
        );
        -webkit-mask:
            linear-gradient(#fff 0 0) content-box,
            linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        z-index: -1;
        transition: all 0.3s ease;
    }

    /* Hover effect - rotates the gradient */
    .get-started-btn-gradient:hover::before {
        background: linear-gradient(
            225deg,
            #fdd4a3,
            #fdd4a3 13%,
            #fba69e 32%,
            #fb6fec 49%,
            #84a9fa 68%,
            #90dcf7 86%,
            #c7e9ab
        );
        padding: 3px;
    }

    .get-started-btn-gradient:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(251, 111, 236, 0.3);
    }

    .get-started-btn-gradient svg {
        stroke: #1a1a1a;
        transition: transform 0.3s ease;
    }

    .get-started-btn-gradient:hover svg {
        transform: translateX(3px);
    }
</style>
